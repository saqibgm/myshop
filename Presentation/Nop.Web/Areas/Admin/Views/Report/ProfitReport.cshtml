@model ProfitReportSearchModel

@{
    //page title
    ViewBag.Title = T("Admin.Reports.ProfitReport").Text;
    //active menu item (system name)
    Html.SetActiveMenuItemSystemName("Profit Report");
}

@{
    const string hideSearchBlockAttributeName = "CountrySalesPage.HideSearchBlock";
    var hideSearchBlock = genericAttributeService.GetAttribute<bool>(workContext.CurrentCustomer, hideSearchBlockAttributeName);
}

<nop-antiforgery-token />
<div class="content-header clearfix">
    <h1 class="pull-left">
        @T("Admin.Reports.ProfitReport")
    </h1>
    <div class="pull-right">
        &nbsp;
    </div>
</div>

<div class="content">
    <div class="form-horizontal">
        <div class="panel-group">
            <div class="panel panel-default panel-search">
                <div class="panel-body">
                    <div class="row search-row @(!hideSearchBlock ? "opened" : "")" data-hideAttribute="@hideSearchBlockAttributeName">
                        <div class="search-text">@T("Admin.Common.Search")</div>
                        <div class="icon-search"><i class="fa fa-search" aria-hidden="true"></i></div>
                        <div class="icon-collapse"><i class="fa fa-angle-down" aria-hidden="true"></i></div>
                    </div>

                    <div class="search-body @(hideSearchBlock ? "closed" : "")">

                        <div class="row col-md-12">                          
                            <div class="form-group col-md-6">

                                <div class="col-md-4">
                                    <nop-label asp-for="StartDate" />
                                </div>
                                <div class="col-md-8">
                                    <nop-editor asp-for="StartDate" />
                                </div>
                               
                            </div>
                        
                          
                        <div class="form-group col-md-6">
                            <div class="col-md-4">
                                <nop-label asp-for="CustomerId" />
                            </div>
                            <div class="col-md-8">
                                <nop-select asp-for="CustomerId" asp-items="Model.AvailableCustomers" />
                            </div>
                        </div>
                        
                        </div>
                        <div class="row col-md-12">
                            <div class="row col-md-6 form-group">
                                <div class="col-md-4">
                                    <nop-label asp-for="EndDate" />
                                </div>
                                <div class="col-md-8">
                                    <nop-editor asp-for="EndDate" />
                                </div>
                            </div>
                            <div class="row col-md-6 form-group">
                                <div class="col-md-4">
                                    <nop-label asp-for="OrderStatusId" />
                                </div>
                                <div class="col-md-8">
                                    <nop-select asp-for="OrderStatusId" asp-items="Model.AvailableOrderStatuses" />
                                </div>
                            </div>
                        </div> 
                        <div class="row">
                            <div class="col-md-7 col-md-offset-5">
                                <button type="button" id="search-Profitreport" class="btn btn-primary btn-search">
                                    <i class="fa fa-line-chart"></i>
                                    @T("Admin.Reports.Sales.Country.RunReport")
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="panel panel-default">
                <div class="panel-body">
                    @await Html.PartialAsync("Table", new DataTablesModel
               {
                   Name = "ProfitList-grid",
                   UrlRead = new DataUrl("ProfitReportList", "Report", null),
                   SearchButtonId = "search-Profitreport",
                   Length = Model.PageSize,
                   LengthMenu = Model.AvailablePageSizes,
                   Filters = new List<FilterParameter>
                        {
                            new FilterParameter(nameof(Model.StartDate)),
                            new FilterParameter(nameof(Model.EndDate)),
                            new FilterParameter(nameof(Model.CustomerId)),
                             new FilterParameter(nameof(Model.OrderStatusId)),
                            new FilterParameter(nameof(Model.InvoiceNo)),
                            new FilterParameter(nameof(Model.SearchKeyword))


                        },
                   ColumnCollection = new List<ColumnProperty>
                        {
                            new ColumnProperty(nameof(ProfitReportModel.CustomerName))
                            {
                                Title = T("Admin.Reports.ProfitReport.Fields.CustomerName").Text
                            },
                            new ColumnProperty(nameof(ProfitReportModel.InvoiceCount))
                            {
                                Title = T("Admin.Reports.ProfitReport.Fields.Orders").Text
                            },
                            new ColumnProperty(nameof(ProfitReportModel.TotalSaleStr))
                            {
                                Title = T("Admin.Reports.ProfitReport.Fields.TotalSale").Text
                            },
                             new ColumnProperty(nameof(ProfitReportModel.ProfitStr))
                            {
                                Title = T("Admin.Reports.ProfitReport.Fields.Profit").Text
                            }
                             ,
                             new ColumnProperty(nameof(ProfitReportModel.TotalAmountStr))
                            {
                                Title = T("Admin.Reports.ProfitReport.Fields.TotalAmount").Text
                            }

                        }
               })
                </div>
            </div>
        </div>
    </div>
</div>